@type trace
# symlink tests about timestamp assignment in an immediate architecture

Pid 1 -> mkdir /nonempty_dir_1/ 0o777
Tau
Pid 1 <- -

Pid 1 -> stat /nonempty_dir_1/
Tau
Pid 1 <- RV_stat {st_dev=2049;  st_ino=1;st_kind=S_IFDIR;st_perm=0o755;st_nlink=2;st_uid=0;st_gid=0;st_rdev=0;st_size=4096;st_atim={tv_sec=0;tv_nsec=0;}; st_mtim={ tv_sec=0;tv_nsec=0;};st_ctim={ tv_sec=0;tv_nsec=0;};}

# end of state setup

Pid 1 -> symlink /nonempty_dir_1/f1.txt /nonempty_dir_1//my_symlink
Tau
Pid 1 <- -

# symlink set the timestamps of the new symlink (see SYMLINK_TS:1 in fs_spec/posix/symlink.md)

Pid 1 -> lstat /nonempty_dir_1//my_symlink
Tau
Pid 1 <- RV_stat {st_dev=2049;st_ino=2;st_kind=S_IFLNK;st_perm=0o777;st_nlink=1;st_uid=0;st_gid=0;st_rdev=0;st_size=22;st_atim={tv_sec=1;tv_nsec=0;};st_mtim={tv_sec=1;tv_nsec=0;};st_ctim={tv_sec=1;tv_nsec=0;};}

# symlink alters the st_mtime and st_ctime timestamps of the parent directory (see SYMLINK_TS:2 in fs_spec/posix/symlink.md)

Pid 1 -> stat /nonempty_dir_1/
Tau
Pid 1 <- RV_stat {st_dev=2049; st_ino=1;st_kind=S_IFDIR;st_perm=0o755;st_nlink=2;st_uid=0;st_gid=0;st_rdev=0;st_size=4096;st_atim={tv_sec=0;tv_nsec=0;}; st_mtim={ tv_sec=1;tv_nsec=0;};st_ctim={ tv_sec=1;tv_nsec=0;};}
