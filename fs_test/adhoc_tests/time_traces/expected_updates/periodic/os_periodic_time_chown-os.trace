@type trace

#chown tests about timestamp assignment in a periodic architecture

Pid 1 -> mkdir /empty_dir_1/ 0o777
Tau
Pid 1 <- -

# end of state setup

Pid 1 -> stat /empty_dir_1/
Tau
Pid 1 <- RV_stat {st_dev=2049;st_ino=1;st_kind=S_IFDIR;st_perm=0o755;st_nlink=2;st_uid=0;st_gid=0;st_rdev=0;st_size=4096;st_atim={tv_sec=2;tv_nsec=0;}; st_mtim={ tv_sec=2;tv_nsec=0;};st_ctim={ tv_sec=2;tv_nsec=0;};}

Pid 1 -> chown /empty_dir_1/ (User_id 4) (Group_id 4)
Tau
Pid 1 <- -

# chown should mark the st_ctime of the directory (see CHOWN_TS in fs_spec/posix/chown)

dump-internal

Pid 1 -> stat /empty_dir_1/
Tau
Pid 1 <- RV_stat {st_dev=2049;st_ino=1;st_kind=S_IFDIR;st_perm=0o755;st_nlink=2;st_uid=4;st_gid=4;st_rdev=0;st_size=4096;st_atim={tv_sec=2;tv_nsec=0;}; st_mtim={ tv_sec=2;tv_nsec=0;};st_ctim={ tv_sec=8;tv_nsec=0;};}

Pid 1 -> open /f1.txt [O_CREAT;O_RDWR] 0o666
Tau
Pid 1 <- -

Pid 1 -> stat /f1.txt
Tau
Pid 1 <- RV_stat {st_dev=2049;st_ino=2;st_kind=S_IFREG;st_perm=0o644;st_nlink=1;st_uid=0;st_gid=0;st_rdev=0;st_size=0;st_atim={tv_sec=8;tv_nsec=0;};st_mtim={tv_sec=8;tv_nsec=0;};st_ctim={tv_sec=8;tv_nsec=0;};}

Pid 1 -> chown /f1.txt (User_id 4) (Group_id 4)
Tau
Pid 1 <- -

# chown should mark the st_ctime of the file (see CHOWN_TS in fs_spec/posix/chown)

dump-internal

Pid 1 -> stat /f1.txt
Tau
Pid 1 <- RV_stat {st_dev=2049;st_ino=2;st_kind=S_IFREG;st_perm=0o644;st_nlink=1;st_uid=4;st_gid=4;st_rdev=0;st_size=0;st_atim={tv_sec=8;tv_nsec=0;};st_mtim={tv_sec=8;tv_nsec=0;};st_ctim={tv_sec=9;tv_nsec=0;};}

