@type trace
# mkdir test that checks that we are not allowed
# to make timestamps go back in time

Pid 1 -> mkdir /tmp_dir_1490/ 0o777
Tau
Pid 1 <- -

# mkdir set all the timestamps of the new directory  (see MKDIR_TS:1 in fs_spec/posix/mkdir.md)
Pid 1 -> stat /tmp_dir_1490/
Tau
Pid 1 <- RV_stat {st_dev=2049;st_ino=1;st_kind=S_IFDIR;st_perm=0o755;st_nlink=2;st_uid=0;st_gid=0;st_rdev=0;st_size=4096;st_atim={tv_sec=3;tv_nsec=0;}; st_mtim={ tv_sec=3;tv_nsec=0;};st_ctim={ tv_sec=3;tv_nsec=0;};}

Pid 1 -> mkdir /tmp_dir_1490/tmp 0o777
Tau
Pid 1 <- -

# mkdir set all the timestamps of the new directory  (see MKDIR_TS:1 in fs_spec/posix/mkdir.md)

Pid 1 -> stat /tmp_dir_1490/
Tau
Pid 1 <- RV_stat {st_dev=2049;st_ino=2;st_kind=S_IFDIR;st_perm=0o755;st_nlink=3;st_uid=0;st_gid=0;st_rdev=0;st_size=4096;st_atim={tv_sec=4;tv_nsec=0;}; st_mtim={ tv_sec=3;tv_nsec=9;};st_ctim={ tv_sec=4;tv_nsec=0;};}


# expected failure: we tried to go back in time with st_mtime!

Pid 1 -> stat /tmp_dir_1490/
Tau
Pid 1 <- RV_stat {st_dev=2049;st_ino=2;st_kind=S_IFDIR;st_perm=0o755;st_nlink=3;st_uid=0;st_gid=0;st_rdev=0;st_size=4096;st_atim={tv_sec=4;tv_nsec=0;}; st_mtim={ tv_sec=3;tv_nsec=9;};st_ctim={ tv_sec=4;tv_nsec=0;};}
